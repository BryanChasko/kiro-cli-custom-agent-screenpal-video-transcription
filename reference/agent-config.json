{
  "name": "screenpal-video-transcriber",
  "description": "You are a specialized devops engineer enabling video analysis and transcriptions via agentic tools including MCP and RAG. CRITICAL WORKFLOW: 1) Use @video-transcriber/transcribe_video for audio requests - transcribing the audio from a video.  visual requests are handled by other parts of the architecture. See the docs before you start writing commands and work in reality. 2) For visual analysis: Call @ffmpeg-mcp/get_video_info, then @ffmpeg-mcp/extract_frames_from_video with scene_threshold=0.4 to extract actual PNG frames. 3) For EACH extracted frame, call @vision-server/analyze_image with prompt: 'Describe speaker outfit if not previously described, presentation setting, all UI elements, buttons, text, menus, and visual content visible on screen. Include exact text, button labels, window titles, and interface details.' 4) Analyze frames in sequence to capture visual changes. 5) Generate detailed output with frame-by-frame visual descriptions including exact UI text and element details. 6) Save complete analysis to /Users/bryanchasko/Downloads/video-transcripts/ with timestamp correlations. Output must include: frame number, timestamp, exact visual description with all readable text and UI elements. CRITICAL: NEVER use manual commands, bash scripts, or direct tool execution. ONLY use MCP tools unless you confirm I want otherwise. Do not remove logic without human approval. If MCP tools fail, report the failure and stop - do NOT attempt manual workarounds. Leverage Multimodal ingestion and narrative synthesis agents for  video workflows.",
  "prompt": "Impliment tracing and leverage the trace observability at all steps. Use agentic tooling to extract audio and visual transcripts from video links / files, normalize and organize them, and generate deaf / blind accessible narrative summaries.",
  "tools": [
    "fs_read",
    "fs_write", 
    "knowledge",
    "@video-transcriber/transcribe_video",
    "@video-transcriber/extract_audio",
    "@video-transcriber/get_video_info",
    "@vision-server/analyze_image",
    "@vision-server/detect_objects",
    "@vision-server/generate_caption",
    "@filesystem-mcp/read_file",
    "@filesystem-mcp/write_file",
    "everything-mcp"
  ],
  "allowedTools": [
    "fs_read",
    "fs_write",
    "knowledge",
    "@video-transcriber/*",
    "@vision-server/*",
    "@filesystem-mcp/*",
    "@everything-mcp/*"
  ],
  "mcpServers": {
    "video-transcriber": {
      "command": "node",
      "args": ["/tmp/video-transcriber-mcp/dist/index.js"],
      "env": {
        "WHISPER_MODEL": "base",
        "YOUTUBE_FORMAT": "bestaudio",
        "WHISPER_DEVICE": "cpu"
      },
      "timeout": 300000,
      "disabled": false
    },
    "vision-server": {
      "command": "node",
      "args": ["/tmp/moondream-mcp/build/index.js"],
      "env": {
        "OLLAMA_BASE_URL": "http://localhost:11434"
      },
      "timeout": 180000,
      "disabled": false
    },
    "filesystem-mcp": {
      "command": "docker",
      "args": [
        "run", "--rm",
        "-v", "/Users/bryanchasko/Downloads/kiro-videos:/mnt",
        "filesystem-mcp"
      ],
      "env": {
        "ROOT_DIR": "/mnt",
        "DEBUG": "false"
      }
    },
    "everything-mcp": {
      "command": "docker",
      "args": [
        "run", "--rm",
        "-v", "/Users/bryanchasko/Downloads/kiro-videos:/mnt",
        "everything-mcp"
      ],
      "env": {
        "ROOT_DIR": "/mnt",
        "DEBUG": "false"
      }
    }
  },
  "toolsSettings": {
    "fs_write": {
      "allowedPaths": [
        "transcripts/**",
        "output/**",
        "temp/**"
      ]
    },
    "@video-transcriber/transcribe_video": {
      "maxDuration": 3600
    },
    "@vision-server/analyze_image": {
      "maxFrames": 100,
      "allowedFormats": ["png", "jpg", "jpeg"]
    }
  },
  "resources": [
    "file://knowledge/**/*.md",
    "file://README.md",
    "file://USAGE.md"
  ],
  "hooks": {
    "agentSpawn": [
      {
        "command": "echo 'ğŸ¬ Multi-Platform Video Transcriber Agent initialized (ScreenPal, YouTube, Twitch, S3). Running mandatory verification sequence...'"
      },
      {
        "command": "node /tmp/video-transcriber-mcp/dist/index.js --help > /dev/null 2>&1 && echo 'âœ… video-transcriber verified' || echo 'âŒ video-transcriber failed'"
      },
      {
        "command": "curl -s http://localhost:11434/api/tags > /dev/null 2>&1 && echo 'âœ… Ollama API responsive' || echo 'âŒ Ollama API not responding'"
      },
      {
        "command": "curl -s http://localhost:11434/api/tags | grep -q moondream && echo 'âœ… Moondream model available' || echo 'âš ï¸ Moondream model missing'"
      }
    ],
    "preToolUse": [
      {
        "matcher": "@video-transcriber/transcribe_video",
        "command": "echo 'ğŸµ Starting media extraction and Whisper transcription pipeline...'"
      }
    ],
    "postToolUse": [
      {
        "matcher": "fs_write",
        "command": "echo 'ğŸ’¾ Timestamped, visually-annotated output saved to ./knowledge/ directory'"
      }
    ]
  },
  "includeMcpJson": false,
  "useLegacyMcpJson": false
}
